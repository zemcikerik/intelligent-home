<app-loading-indicator *ngIf="loading$ | async; else loaded"></app-loading-indicator>

<ng-template #loaded>
  <app-error-message *ngIf="error$ | async as error; else success" [message]="error"></app-error-message>

  <ng-template #success [ngSwitch]="phase$ | async">
    <router-outlet *ngSwitchDefault></router-outlet>
  </ng-template>
</ng-template>
